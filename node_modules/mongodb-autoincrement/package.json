{
  "name": "mongodb-autoincrement",
  "version": "1.0.0",
  "description": "Auto increment support for mongodb and mongoose",
  "repository": {
    "type": "git",
    "url": "git://github.com/TheRoSS/mongodb-autoincrement.git"
  },
  "dependencies": {},
  "peerDependencies": {
    "mongoose": "*"
  },
  "devDependencies": {
    "async": "*",
    "mongoose": "*"
  },
  "keywords": [
    "mongodb",
    "mongoose",
    "plugin",
    "auto-increment",
    "auto",
    "increment",
    "automatic",
    "autoincrement",
    "auto_increment",
    "autoinc",
    "auto-inc",
    "auto_inc",
    "pureautoinc",
    "mongoose-pureautoinc"
  ],
  "author": {
    "name": "Alexey Chistyakov",
    "email": "ross@newmail.ru",
    "url": "http://heartless.su"
  },
  "contributors": [],
  "scripts": {
    "test": "node_modules/mocha/bin/mocha"
  },
  "bugs": {
    "url": "https://github.com/TheRoSS/mongodb-autoincrement/issues"
  },
  "readme": "# mongodb-autoincrement\n=====================\n\nModule to auto increment mongodb _id index. There is also mongoose plugin here.\n\n## Installing\n\n> npm install mongodb-autoincrement\n\n## Using\n\n### ...with mongodb-native driver\n\nGets next auto increment integer index from database for the given collection. \nThe successive calls to this function return different values so you can safely use it in multi client applications.\n\n> getNextSequence(db, collectionName, fieldName, callback)\n\ndb - mongodb-native driver connection object\ncollectionName - name of the collection to get auto increment index for, string\nfieldName - name of the auto increment field [optional]\ncallback - function (err, nextFreeIndex)\n\n````js\nvar MongoClient = require(\"mongodb\").MongoClient;\nvar autoIncrement = require(\"mongodb-autoincrement\");\n\nMongoClient.connect(url, function (err, db) {\n    autoIncrement.getNextSequence(db, collectionName, function (err, autoIndex) {\n        var collection = db.collection(collectionName);\n        collection.insert({\n            _id: autoIndex,\n            ...\n        });\n    });\n});\n````\n\n### ...with mongoose\n\nThe plugin can be applied to particular schema and globally.\n\n> mongoosePlugin(schema, options)\n\nschema - mongoose.Schema\noptions - Object:\n    field - auto increment field name, default _id\n    step - auto increment step, default 1\n\n#### With single schema plugin\n\n````js\nvar mongoose = require('mongoose');\nvar autoIncrement = require(\"mongodb-autoincrement\");\n\nvar schema = new mongoose.Schema({\n    ...\n});\n\nschema.plugin(autoIncrement.mongoosePlugin);\n````\n\n#### Global plugin usage\n\nWhile using plugin as global mongoose plugin it will be applied to all schemas with no {_id: false} option set.\n\n````js\nvar autoIncrement = require(\"mongodb-autoincrement\");\nvar mongoose = require('mongoose');\nmongoose.plugin(autoIncrement.mongoosePlugin, optionalOptions);\n\nvar schema1 = new mongoose.Schema({    // _id field will be auto incremented integer\n    ...\n});\n\nvar schema2 = new mongoose.Schema({    // plugin will not be applied\n    ...\n}, {_id: false});\n````\n\n### Setting default options\n\n````js\nvar autoIncrement = require(\"mongodb-autoincrement\");\nautoIncrement.setDefaults({\n    collection: collectionName,     // collection name for counters, default: counters\n    field: fieldName,               // auto increment field name, default: _id\n    step: integerNumber             // auto increment step\n});\n````\n\n## Notes\n\nYou cannot set initial values for auto increment fields by the module. \nIf you need it you can always set them directly via mongodb.\nFind a record with _id 'collectionName' in the collection 'counters' and set field 'seq' to required value.\n\nCounters collection structure:\n\n````js\n{\n    _id: collectionName,        // name of the collection for which auto increment id field is set\n    field: fieldName,           // name of the field to auto increment in the collection collectionName\n    seq: integerValue           // last auto increment value used\n}\n````\n",
  "readmeFilename": "README.md",
  "homepage": "https://github.com/TheRoSS/mongodb-autoincrement",
  "license": "MIT",
  "_id": "mongodb-autoincrement@1.0.0",
  "dist": {},
  "_from": "mongodb-autoincrement@"
}
